<%= template_error_messages_for 'group' %>
<% if @group && @group.new_record? -%>
  <div class="input_line">
    <div class="input_label"><%= form.label :gid, _('Group ID') %></div>
    <div class="input_value"><%= form.text_field :gid, :size => 40 %></div>
    <div class="param_desc" style="font-size:10px; color:gray;">
    <%= _("*A group ID consists of 4 or more letters of alphabets, numbers, \"-\" and \"_\".<br>\n  *Group ID is used in many situations e.g. URLs to identify the group so choose a understandable one.")%>
    </div>
  </div>
<% end -%>
<div class="input_line">
  <div class="input_label"><%= form.label :name, _('Name of Group') %></div>
  <div class="input_value"><%= form.text_field :name, :size => 40 %></div>
</div>

<div class="input_line">
  <div class="input_label"><%= _('Category')%></div>
  <div class="input_value">
    <table style="margin-left:3px;border:0;">
    <tr><th width="100px"></th><th></th></tr>
<% GroupCategory.all.each do |category| -%>
    <tr>
      <td>
        <%= form.radio_button :group_category_id, category.id, :class => "category_radio_button" %>
        <%= form.label "group_category_id_#{category.id}", "#{get_group_icon(category, :margin => true)}#{content_tag(:b, h(category.name))}" %>
      </td>
      <td><%= h category.description %></td>
    </tr>
<% end -%>
    </table>
  </div>
</div>

<div class="input_line">
  <div class="input_label"><%= form.label :description, s_('Group|Description') %></div>
  <div class="input_value richtext" style="clear: left;"><%= form.text_area :description, :class => 'invisible' %></div>
</div>

<div class="input_line">
  <div class="input_label"><%= _('Joining the group') %></div>
  <div class="input_value">
    <%= form.label :protected, _('Approval from owner required?') %>
    <%= form.select :protected, { _("No") => false, _("Yes") => true } %>
  </div>
</div>

<div class="input_line">
  <div class="input_label"><%= _('Default Privacy Settings') %></div>
  <div class="input_value"><table><tr><td>
    <%= form.radio_button(:default_publication_type, 'public', :class => 'default_publication_type') %><%= form.label(:default_publication_type_public, _('Open to All')) %>
    <%= form.radio_button(:default_publication_type, 'private', :class => 'default_publication_type') %><%= form.label(:default_publication_type_private, _("Members Only")) %>
  </td></tr></table></div>
</div>

<div class="input_line">
  <div class="input_label"><%= _('Default Notification Method') %></div>
  <%= form.check_box(:default_send_mail) %><%= form.label('default_send_mail', _('Send Emails')) %>
  <div class="input_value"><table><tr><td>
  </td></tr></table></div>
</div>

<%= ckeditor "group_description" %>

<% content_for :javascript_initializers do -%>
      $j('.category_radio_button')
      .click(function(){
          $j('.category_radio_button').parent().parent().css('backgroundColor','#fff');
          $j(this).parent().parent().css('backgroundColor','#ffb');
      });
      $j('.category_radio_button:checked').click();
<% end -%>
